<span style="font-size:14px;"><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>图表统计</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src = "highcharts.js"> </script>

    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
var ip=localStorage.getItem("ip")
  var url=`http://${ip}/dutylist/src/diagram.php`
        var chart;
        $(document).ready(function () {
            $.ajax({
                 url:url,
                 dataType:'json',
                 type:'post',
                 data:{
                    type:1,
                 },
                 success:function(ret){
            //曲线图初始化
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container1',
                    type: 'line',
                    marginRight: 100,
                    marginBottom: 25
                },
                title: {
                    text: '月曲线图表',
                    x: -20 //center
                },
                subtitle: {
                    text: '用户得分曲线',
                    x: -20
                },
                xAxis: {
                    categories: ret.date
                },
                yAxis: {
                    title: {
                        text: '数据'
                    },
                    plotLines: [{
                        value: 0,
                        width: 2,
                        color: '#808080'
                    }]
                },
                tooltip: {
                    formatter: function () {
                        return '<b>' + this.series.name + '</b><br/><br/>' +
                    this.x + ': ' + this.y + '分';
                    }
                },
                legend: {
                    layout: 'vertical',
                    align: 'right',
                    verticalAlign: 'top',
                    x: -20,
                    y: 200,
                    borderWidth: 0
                },
                series: ret.arr
            });


            //柱形图初始化
            // chart = new Highcharts.Chart({
            //     chart: {
            //         renderTo: 'container2',
            //         type: 'column'
            //     },
            //     title: {
            //         text: '数据柱形图表'
            //     },
            //     subtitle: {
            //         text: 'jqddsjfx'
            //     },
            //     xAxis: {
            //         categories: [
            //     '01月',
            //     '02月',
            //     '03月',
            //     '04月',
            //     '05月',
            //     '06月',
            //     '07月',
            //     '08月',
            //     '09月',
            //     '10月',
            //     '11月',
            //     '12月'
            // ]
            //     },
            //     yAxis: {
            //         min: 0,
            //         title: {
            //             text: '数据'
            //         }
            //     },
            //     legend: {
            //         layout: 'vertical',
            //         backgroundColor: '#FFFFFF',
            //         align: 'left',
            //         verticalAlign: 'top',
            //         x: 100,
            //         y: 70,
            //         floating: true,
            //         shadow: true
            //     },
            //     tooltip: {
            //         formatter: function () {
            //             return '' +
            //         this.x + ': ' + this.y + ' 单位';
            //         }
            //     },
            //     plotOptions: {
            //         column: {
            //             pointPadding: 0.2,
            //             borderWidth: 0
            //         }
            //     },
            //     series: [{
            //         name: '用户1',
            //         data: [499, 715, 1064, 1292, 1440, 1760, 1356, 1485, 2164, 1941, 956, 544]

            //     }, {
            //         name: '用户2',
            //         data: [836, 788, 985, 934, 1060, 845, 1050, 1043, 912, 835, 1066, 923]

            //     }, {
            //         name: '用户3',
            //         data: [489, 388, 393, 414, 470, 483, 590, 596, 524, 652, 593, 512]

            //     }, {
            //         name: '用户4',
            //         data: [424, 332, 345, 397, 526, 755, 574, 604, 476, 391, 468, 511]

            //     }]
            // });

        //饼状图初始化
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container3',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: '清单数据饼状图表'
            },
            tooltip: {
                formatter: function () {
                    return '<b>' + this.point.name + '</b>: ' + this.percentage.toFixed(2) + ' %';
                }
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        color: '#000000',
                        connectorColor: '#000000',
                        formatter: function () {
                            return '<b>' + this.point.name + '</b>: ' + this.percentage.toFixed(2) + ' %';
                        }
                    }
                }
            },
            series: [{
                type: 'pie',
                name: 'pie',
                data: ret.cake
            }]
        });
                    }
                })
    });
</script>
<style>
header{
	background: #f1f1f1;
	height: 50px;
	width: 100%;

}
header div{
	margin-left: 15px;
	width: 56%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: space-between;
	font-size: 14px;
}
header img{
	width: 17px;
	height: 17;
}
header span{
	width: 40px;
	height: 100%;
	display: flex;
	align-items: center;
}
</style>
</head>
<body>
  <header>
    <div>
    <span tapmode onclick="comeBack()"><img src="../../image/fh.svg" alt="" ></span>
    <h4>统计曲线图</h4>
  </div>
</header>
<p>你当前在本部门排第一，完成度90%，恭喜你进入减责行列。</p>
<div id="container1" style="min-width:350px; height:300px; margin:15px auto;"></div>
        <div style="width:350px; height:200px; margin:15px auto;">
            <h3>当月最高得分榜</h3>
            <table border='1' cellspacing="0" class="table table-striped table-bordered">
                <tr><th>姓名</th><th>得分</th><th>部门</th></tr>
                <tr><td>方欣英</td><td>96</td><td>101车间</td></tr>
                <tr><td>李凌添</td><td>92</td><td>103车间</td></tr>
                <tr><td>薛智玲</td><td>86</td><td>后勤部</td></tr>
            </table>
        </div>
<div id="container3" style="min-width: 350px; height: 300px; margin:0 auto;"></div>
<div style="width:350px; height:200;margin:15px auto;">
            <h3>当月最低得分榜</h3>
            <table border='1' cellspacing="0" class="table table-striped table-bordered">
                <tr><th>姓名</th><th>得分</th><th>部门</th></tr>
                <tr><td>赵文瀚</td><td>56</td><td>103车间</td></tr>
                <tr><td>黄雍军</td><td>58</td><td>101车间</td></tr>
                <tr><td>李国伊</td><td>62</td><td>人事部</td></tr>
            </table>
 </div>
<div style="width:350px; height:200px;margin:0 auto;">
            <h3>追责部门</h3>
            <table border='1' cellspacing="0" class="table table-striped table-bordered">
                <tr><th>编号</th><th>部门</th></tr>
                <tr><th>1 </th><th>101车间</th></tr>
                <tr><th>2</th><th>后勤部</th></tr>
                <tr><th>3</th><th>人事部</th></tr>
            </table>
 </div>
<div style="width:350px; height:200; margin:0 auto;">
            <h3>追责内容</h3>
            <table border='1' cellspacing="0" class="table table-striped table-bordered">
                <tr><th>编号</th><th>内容</th></tr>
                <tr><th>1 </th><th>日常用品发放</th></tr>
                <tr><th>2</th><th>培训签到</th></tr>
                <tr><th>3</th><th>巡查记录</th></tr>
            </table>
 </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script>
function comeBack(){
      api.historyBack({
      },function(ret,err){
            if (!ret.status) {
                  api.closeWin();
            }
      });
}
</script>
</html>
